<script>
  Vue.component('v-select', VueSelect.VueSelect)

  let nav = new Vue({
    el: '.nav_city',
    data: <%= fill_vue_data(nil, {
      list_values: 'year main_city',
      lists: 'years cities'
    }, 'app') %>,

    watch: {
      year() {
        console.log(this.year)
        if (app != undefined) app.onInput({name: 'year', value: this.year});
      },

      main_city() {
        $.ajax({
          type: "POST",
          url: "/ajax/set_city",
          data: {city: this.main_city.value},
          dataType: "json",
          encode: true
        })
        delay('sortable_query({})',700)
      }
    },
    
    methods: {
      onInput(e){
        console.log('onInput', e);
      }
    }

   })
</script>